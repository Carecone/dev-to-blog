{"type_of":"article","id":1075593,"title":"Using local mail as notification tool","description":"Using local mail as notification tool   Post created at 2022-05-04 14:25  I used to run...","readable_publish_date":"May 4","slug":"using-local-mail-as-notification-tool-47k2","path":"/guionardo/using-local-mail-as-notification-tool-47k2","url":"https://dev.to/guionardo/using-local-mail-as-notification-tool-47k2","comments_count":0,"public_reactions_count":0,"collection_id":null,"published_timestamp":"2022-05-04T18:50:55Z","positive_reactions_count":0,"cover_image":null,"social_image":"https://dev.to/social_previews/article/1075593.png","canonical_url":"https://dev.to/guionardo/using-local-mail-as-notification-tool-47k2","created_at":"2022-05-04T18:50:55Z","edited_at":null,"crossposted_at":null,"published_at":"2022-05-04T18:50:55Z","last_comment_at":"2022-05-04T18:50:55Z","reading_time_minutes":2,"tag_list":"mail, linux, terminal, notification","tags":["mail","linux","terminal","notification"],"body_html":"\u003ch1\u003e\n  \u003ca name=\"using-local-mail-as-notification-tool\" href=\"#using-local-mail-as-notification-tool\"\u003e\n  \u003c/a\u003e\n  Using local mail as notification tool\n\u003c/h1\u003e\n\n\u003cp\u003ePost created at 2022-05-04 14:25\u003c/p\u003e\n\n\u003cp\u003eI used to run commands and develop into linux terminal, and have some scheduled tasks running in the background.\u003c/p\u003e\n\n\u003cp\u003eI need to be notified on terminal about some finished processes in a generic form, without depending GUI notifications.\u003c/p\u003e\n\n\u003cp\u003eBy default, every cron job thats writes to console is sent to user local email. So, local email will be my notification messages repository.\u003c/p\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"setup\" href=\"#setup\"\u003e\n  \u003c/a\u003e\n  Setup\n\u003c/h2\u003e\n\n\u003cp\u003eI used this setup in Ubuntu, but it must works in any distro.\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eAdding current user to \u003cstrong\u003email\u003c/strong\u003e group\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eadduser \u003cspan class=\"nv\"\u003e$USER\u003c/span\u003e mail\nAdding user \u003cspan class=\"s1\"\u003e'guionardo'\u003c/span\u003e to group \u003cspan class=\"s1\"\u003e'mail'\u003c/span\u003e ...\nAdding user guionardo to group mail\nDone.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003col\u003e\n\u003cli\u003eInstall mailtools, postfix, and mutt\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003esudo \u003c/span\u003eapt \u003cspan class=\"nb\"\u003einstall \u003c/span\u003emailtools postfix mutt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003col\u003e\n\u003cli\u003eSend test mail\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"This is a test\"\u003c/span\u003e | mail \u003cspan class=\"s2\"\u003e\"--subject=Test email\"\u003c/span\u003e \u003cspan class=\"nv\"\u003e$USER\u003c/span\u003e@localhost\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003col\u003e\n\u003cli\u003eTest new mail\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003email\n\u003cspan class=\"s2\"\u003e\"/var/mail/guionardo\"\u003c/span\u003e: 1 message 1 new\n\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003eN 1 Guionardo Furlan qua mai 4 17:41 14/464 Test email\n? q\nHeld 1 message \u003cspan class=\"k\"\u003ein\u003c/span\u003e /var/mail/guionardo\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003eOk, we have an e-mail into our inbox. Lets read with better tool.\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003emutt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003eq:Quit d:Del u:Undel s:Save m:Mail r:Reply g:Group ?:Help\n 1 O F mai 04 To guionardo@lo \u003cspan class=\"o\"\u003e(\u003c/span\u003e 2\u003cspan class=\"o\"\u003e)\u003c/span\u003e Test email\n\n\n\n\u003cspan class=\"nt\"\u003e---Mutt\u003c/span\u003e: /var/mail/guionardo \u003cspan class=\"o\"\u003e[\u003c/span\u003eMsgs:1 Old:1 0,6K]---\u003cspan class=\"o\"\u003e(\u003c/span\u003ethreads/date\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"nt\"\u003e----\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003eall\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"nt\"\u003e---\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003ei:Exit -:PrevPg \u0026lt;Space\u0026gt;:NextPg v:View Attachm. d:Del r:Reply j:Next ?:He\nDate: Wed, 4 May 2022 17:41:20 +0000 \u003cspan class=\"o\"\u003e(\u003c/span\u003eUTC\u003cspan class=\"o\"\u003e)\u003c/span\u003e\nFrom: Guionardo Furlan \u0026lt;guionardo@furlan-server\u0026gt;\nTo: guionardo@localhost\nSubject: Test email\nX-Mailer: mail \u003cspan class=\"o\"\u003e(\u003c/span\u003eGNU Mailutils 3.7\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\nThis is a \u003cspan class=\"nb\"\u003etest\u003c/span\u003e\n\n\n\u003cspan class=\"nt\"\u003e-O\u003c/span\u003e F- 1/1: Guionardo Furlan Test email \u003cspan class=\"nt\"\u003e--\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003eall\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003col\u003e\n\u003cli\u003eSetup for notifications\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eAdd this content to your ~/.profile or equivalent file (.bashrc, .zshrc, etc):\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003eMAIL_CHECK_TIME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e0\nmail_prompt\u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n \u003cspan class=\"nb\"\u003elocal pwd\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s1\"\u003e'~'\u003c/span\u003e\n \u003cspan class=\"nb\"\u003elocal \u003c/span\u003e\u003cspan class=\"nv\"\u003eMAIL_SECONDS_DIFF\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$MAILCHECK\u003c/span\u003e\n\n \u003cspan class=\"nb\"\u003elocal \u003c/span\u003e\u003cspan class=\"nv\"\u003eMAIL_ELAPSED_SECONDS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$((\u003c/span\u003eSECONDS \u003cspan class=\"o\"\u003e-\u003c/span\u003e MAIL_CHECK_TIME\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n\n \u003cspan class=\"o\"\u003e[\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$PWD\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$HOME\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003epwd\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003ePWD\u003c/span\u003e\u003cspan class=\"p\"\u003e/#\u003c/span\u003e\u003cspan class=\"nv\"\u003e$HOME\u003c/span\u003e\u003cspan class=\"p\"\u003e//~/\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e\n\n \u003cspan class=\"nb\"\u003eprintf\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"033]0;%s@%s:%s033\u003c/span\u003e\u003cspan class=\"se\"\u003e\\%\u003c/span\u003e\u003cspan class=\"s2\"\u003es\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eUSER\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eHOSTNAME\u003c/span\u003e\u003cspan class=\"p\"\u003e%%.*\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003epwd\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n\n \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e[[\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$MAIL_CHECK_TIME\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e-eq\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"0\"\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$MAIL_ELAPSED_SECONDS\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e-gt\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$MAIL_SECONDS_DIFF\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e]]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n \u003c/span\u003e\u003cspan class=\"nb\"\u003elocal \u003c/span\u003e\u003cspan class=\"nv\"\u003eMAILX\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003emailx 2\u0026gt;/dev/null \u0026amp;\u003cspan class=\"si\"\u003e)\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n \u003cspan class=\"nv\"\u003eUNREADEN_REGEX\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"s([0-9]{1,4})sn\"\u003c/span\u003e\n \u003cspan class=\"o\"\u003e[[\u003c/span\u003e \u003cspan class=\"nv\"\u003e$MAILX\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e~ \u003cspan class=\"nv\"\u003e$UNREADEN_REGEX\u003c/span\u003e \u003cspan class=\"o\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nv\"\u003eUNREADEN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"si\"\u003e$(\u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"k\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eBASH_REMATCH\u003c/span\u003e\u003cspan class=\"p\"\u003e[1]\u003c/span\u003e\u003cspan class=\"k\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"si\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"nv\"\u003eUNREADEN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e0\n \u003cspan class=\"nb\"\u003elocal \u003c/span\u003e\u003cspan class=\"nv\"\u003eCOUNT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$((\u003c/span\u003eUNREADEN\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n \u003cspan class=\"nb\"\u003elocal \u003c/span\u003e\u003cspan class=\"nv\"\u003eMESSAGE_TEXT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"message\"\u003c/span\u003e\n \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$COUNT\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e-gt\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"0\"\u003c/span\u003e \u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n if\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$COUNT\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e-gt\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n \u003c/span\u003e\u003cspan class=\"nv\"\u003eMESSAGE_TEXT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"messages\"\u003c/span\u003e\n \u003cspan class=\"k\"\u003efi\n \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"nv\"\u003e$COUNT\u003c/span\u003e\u003cspan class=\"s2\"\u003e unreaden \u003c/span\u003e\u003cspan class=\"nv\"\u003e$MESSAGE_TEXT\u003c/span\u003e\u003cspan class=\"s2\"\u003e. Run mutt\"\u003c/span\u003e\n \u003cspan class=\"k\"\u003efi\n \u003c/span\u003e\u003cspan class=\"nv\"\u003eMAIL_CHECK_TIME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nv\"\u003e$SECONDS\u003c/span\u003e\n \u003cspan class=\"k\"\u003efi\u003c/span\u003e\n\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e[[\u003c/span\u003e \u003cspan class=\"si\"\u003e$(\u003c/span\u003ewhich mailx\u003cspan class=\"si\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e]]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n \u003c/span\u003e\u003cspan class=\"nv\"\u003ePROMPT_COMMAND\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"mail_prompt\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003efi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003col\u003e\n\u003cli\u003eClose and reopen your terminal to load this configuration\u003c/li\u003e\n\u003cli\u003eNow, when you access the terminal, messages not readden will show a prompt:\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e1 unreaden message. Run mutt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003eIn your custom scripts, you can send email to your local user and get notified.\u003c/p\u003e\n\n","body_markdown":"# Using local mail as notification tool\n\nPost created at 2022-05-04 14:25\n\nI used to run commands and develop into linux terminal, and have some scheduled tasks running in the background.\n\nI need to be notified on terminal about some finished processes in a generic form, without depending GUI notifications.\n\nBy default, every cron job thats writes to console is sent to user local email. So, local email will be my notification messages repository.\n\n## Setup\n\nI used this setup in Ubuntu, but it must works in any distro.\n\n1. Adding current user to __mail__ group\n\n```bash\n$ sudo adduser $USER mail\nAdding user 'guionardo' to group 'mail' ...\nAdding user guionardo to group mail\nDone.\n```\n\n2. Install mailtools, postfix, and mutt\n\n```bash\n$ sudo apt install mailtools postfix mutt\n```\n\n3. Send test mail\n\n```bash\n$ echo \"This is a test\" | mail \"--subject=Test email\" $USER@localhost\n```\n\n4. Test new mail\n\n```bash\n$ mail\n\"/var/mail/guionardo\": 1 message 1 new\n\u003eN 1 Guionardo Furlan qua mai 4 17:41 14/464 Test email\n? q\nHeld 1 message in /var/mail/guionardo\n```\n\nOk, we have an e-mail into our inbox. Lets read with better tool.\n\n```bash\n$ mutt\n```\n\n```bash\nq:Quit d:Del u:Undel s:Save m:Mail r:Reply g:Group ?:Help\n 1 O F mai 04 To guionardo@lo ( 2) Test email\n\n\n\n---Mutt: /var/mail/guionardo [Msgs:1 Old:1 0,6K]---(threads/date)----(all)---\n```\n\n```bash\ni:Exit -:PrevPg \u003cSpace\u003e:NextPg v:View Attachm. d:Del r:Reply j:Next ?:He\nDate: Wed, 4 May 2022 17:41:20 +0000 (UTC)\nFrom: Guionardo Furlan \u003cguionardo@furlan-server\u003e\nTo: guionardo@localhost\nSubject: Test email\nX-Mailer: mail (GNU Mailutils 3.7)\n\nThis is a test\n\n\n-O F- 1/1: Guionardo Furlan Test email -- (all)\n```\n\n5. Setup for notifications\n\nAdd this content to your ~/.profile or equivalent file (.bashrc, .zshrc, etc):\n\n```bash\nMAIL_CHECK_TIME=0\nmail_prompt() {\n local pwd='~'\n local MAIL_SECONDS_DIFF=$MAILCHECK\n\n local MAIL_ELAPSED_SECONDS=$((SECONDS - MAIL_CHECK_TIME))\n\n [ \"$PWD\" != \"$HOME\" ] \u0026\u0026 pwd=${PWD/#$HOME//~/}\n\n printf \"033]0;%s@%s:%s033\\%s\" \"${USER}\" \"${HOSTNAME%%.*}\" \"${pwd}\"\n\n if [[ \"$MAIL_CHECK_TIME\" -eq \"0\" || \"$MAIL_ELAPSED_SECONDS\" -gt \"$MAIL_SECONDS_DIFF\" ]]; then\n local MAILX=\"$(mailx 2\u003e/dev/null \u0026)\"\n UNREADEN_REGEX=\"s([0-9]{1,4})sn\"\n [[ $MAILX =~ $UNREADEN_REGEX ]] \u0026\u0026 UNREADEN=$(echo \"${BASH_REMATCH[1]}\") || UNREADEN=0\n local COUNT=$((UNREADEN))\n local MESSAGE_TEXT=\"message\"\n if [ \"$COUNT\" -gt \"0\" ]; then\n if [ \"$COUNT\" -gt \"1\" ]; then\n MESSAGE_TEXT=\"messages\"\n fi\n echo \"$COUNT unreaden $MESSAGE_TEXT. Run mutt\"\n fi\n MAIL_CHECK_TIME=$SECONDS\n fi\n\n}\n\nif [[ $(which mailx) ]]; then\n PROMPT_COMMAND=\"mail_prompt\"\nfi\n```\n\n6. Close and reopen your terminal to load this configuration\n7. Now, when you access the terminal, messages not readden will show a prompt:\n\n```bash\n1 unreaden message. Run mutt\n```\n\nIn your custom scripts, you can send email to your local user and get notified.\n","user":{"name":"Guionardo Furlan","username":"guionardo","twitter_username":"guionardo","github_username":"guionardo","website_url":null,"profile_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--u_v01jzV--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/37248/6ed4b320-f9ac-401f-aec4-af926ffe30c0.png","profile_image_90":"https://res.cloudinary.com/practicaldev/image/fetch/s---lfp02sq--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/37248/6ed4b320-f9ac-401f-aec4-af926ffe30c0.png"}}