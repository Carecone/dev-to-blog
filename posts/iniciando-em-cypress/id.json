{"type_of":"article","id":1327355,"title":"Iniciando em cypress!","description":"Iniciando em cypress            Instalação   Node   Verificar se o npm está instalado...","readable_publish_date":"Jan 13","slug":"iniciando-em-cypress-1boo","path":"/carecone/iniciando-em-cypress-1boo","url":"https://dev.to/carecone/iniciando-em-cypress-1boo","comments_count":0,"public_reactions_count":0,"collection_id":null,"published_timestamp":"2023-01-13T00:50:36Z","positive_reactions_count":0,"cover_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--nKgLmh_F--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://raw.githubusercontent.com/Carecone/dev-to-blog/main/posts/iniciando-em-cypress/capa.png","social_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--GPqHBZ5Z--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://raw.githubusercontent.com/Carecone/dev-to-blog/main/posts/iniciando-em-cypress/capa.png","canonical_url":"https://dev.to/carecone/iniciando-em-cypress-1boo","created_at":"2023-01-13T00:50:36Z","edited_at":null,"crossposted_at":null,"published_at":"2023-01-13T00:50:36Z","last_comment_at":"2023-01-13T00:50:36Z","reading_time_minutes":4,"tag_list":"cypress, test, automation","tags":["cypress","test","automation"],"body_html":"\u003ch1\u003e\n  \u003ca name=\"iniciando-em-cypress\" href=\"#iniciando-em-cypress\"\u003e\n  \u003c/a\u003e\n  Iniciando em cypress\n\u003c/h1\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"instala%C3%A7%C3%A3o\" href=\"#instala%C3%A7%C3%A3o\"\u003e\n  \u003c/a\u003e\n  Instalação\n\u003c/h3\u003e\n\n\u003cp\u003eNode\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eVerificar se o npm está instalado corretamente, podendo verificar a versão instalada: npm -v.\u003c/li\u003e\n\u003cli\u003eVerificar a versão do node: node -v.\u003c/li\u003e\n\u003cli\u003eInstalar as versões pares do Node, as versões LTS. exemplo: 16.13.1.\u003c/li\u003e\n\u003cli\u003eIniciar o projeto: npm init. Será feita algumas perguntas para criação do package.json.\u003c/li\u003e\n\u003cli\u003eNa configuração do package.json, informar 'npx cypress open' no 'test command'\u003c/li\u003e\n\u003cli\u003e'npx cypress open' é um executor dos pacotes npm\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eCypress\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003enpm i cypress \u003cspan class=\"nt\"\u003e--save-dev\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"como-iniciar-o-cypress\" href=\"#como-iniciar-o-cypress\"\u003e\n  \u003c/a\u003e\n  Como iniciar o Cypress\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eExistem duas formas de se executar o cypress, a primeira é utilizando 'npm run test' que vai abrir a ferramenta do cypress, e a segunda é utilizando 'npx cypress run' que vai rodar os testes no terminal.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eMesmo seguindo todas as configurações passo a passo, é comum em algumas máquinas ocorrer na primeira execução do Cypress o erro: “Command timed out after 30000 miliseconds”. Para isso, temos duas alternativas:\u003c/p\u003e\n\n\u003cp\u003e1) Executar novamente, com o comando npm run test ou npx cypress open;\u003c/p\u003e\n\n\u003cp\u003e2) Aumentar esse tempo de verificação no arquivo verify.js que fica no caminho: node_modulescypresslib    asks\u003cbr\u003e\nEsse caminho está dentro da pasta node_modulescypress  asks e o nome do arquivo é verify.js\u003cbr\u003e\nLocalize a constante VERIFY_TEST_RUNNER_TIMEOUT_MS e altere de 30000 para 100000;\u003cbr\u003e\nExecutar novamente, com o comando npm run test ou npx cypress open\u003c/p\u003e\n\u003ch3\u003e\n  \u003ca name=\"pastas\" href=\"#pastas\"\u003e\n  \u003c/a\u003e\n  Pastas\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003efixtures: Utilizada para os arquivos de dados fixos, como mocks que serão utilizados nos testes.\u003c/li\u003e\n\u003cli\u003eintegration: Utilizada para os arquivos de testes.\u003c/li\u003e\n\u003cli\u003eplugins: Utilizada para arquivos que eu posso criar/editar para modificar ou estender o comportamento interno no Cypress.\u003c/li\u003e\n\u003cli\u003esupport: Utilizada para arquivos de importação e comandos personalizados que podemos criar dentro do Cypress.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n  \u003ca name=\"caracter%C3%ADsticas-positivas-do-cypress\" href=\"#caracter%C3%ADsticas-positivas-do-cypress\"\u003e\n  \u003c/a\u003e\n  Características positivas do Cypress\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eExecução rápida dos testes.\u003c/li\u003e\n\u003cli\u003eVerifica quais navegadores tenho instalado na máquina, facilitando na execução.\u003c/li\u003e\n\u003cli\u003ePossibilidade de acompanhar toda a linha do tempo dos testes, como o estado anterior, o que aconteceu após a ação etc.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n  \u003ca name=\"principais-comandos\" href=\"#principais-comandos\"\u003e\n  \u003c/a\u003e\n  Principais comandos\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003edescribe: é uma função que tem 2 parâmetros, o primério é o nome da suite de testes, o segundo é uma função onde eu posso executar qualquer coisa\u003c/li\u003e\n\u003cli\u003ebeforeEach: é um comando que é executado antes do inicio de cada cenário de testes.\u003c/li\u003e\n\u003cli\u003eit: é um item de testes ou cenário de teste.\u003c/li\u003e\n\u003cli\u003e.visit: resposável por abrir o link informado.\u003c/li\u003e\n\u003cli\u003e.contains: resposável por identificar elementos pelo texto.\u003c/li\u003e\n\u003cli\u003e.get: resposável por identificar elementos pela classe, tag, id etc.\u003c/li\u003e\n\u003cli\u003e.type: responsável por realizar a ação de escrita.\u003c/li\u003e\n\u003cli\u003e.click: responsável por realizar a ação de click.\u003c/li\u003e\n\u003cli\u003e.should: responsável por realizar as validações.\u003c/li\u003e\n\u003cli\u003e.only: faz com que seja executado somente o cenário que tenha esse comando.\u003c/li\u003e\n\u003cli\u003e.on: usado para eventos, como por exemplo windows.alert.\u003c/li\u003e\n\u003cli\u003e.request: responsável por estruturar e validar as requests.\u003c/li\u003e\n\u003cli\u003e.expect: responsável por realizar as validações.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n  \u003ca name=\"tr%C3%AAs-as\" href=\"#tr%C3%AAs-as\"\u003e\n  \u003c/a\u003e\n  Três As\n\u003c/h3\u003e\n\n\u003cp\u003eO teste geralmente é composto por três As, que é o arrange, o act e o assert\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eO arrange é a preparação do ambiente\u003c/li\u003e\n\u003cli\u003eO act é a ação que eu quero fazer\u003c/li\u003e\n\u003cli\u003eO assert é o que eu quero verificar\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n  \u003ca name=\"pacotes-%C3%BAteis\" href=\"#pacotes-%C3%BAteis\"\u003e\n  \u003c/a\u003e\n  Pacotes úteis\n\u003c/h3\u003e\n\n\u003cp\u003emochawesome é um gerador de relatório personalizado. Com ele podemos fazer configurações, verificar se o log será gerado em html, json, onde será gerado, qual o formato de data para ser utilizado no nome, o título, dentre outros parâmetros\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003enpm i \u003cspan class=\"nt\"\u003e-D\u003c/span\u003e mochawesome\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003eApós a instalação. deverá configurar o arquivo cypress.json\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e{\u003c/span\u003e\n \u003cspan class=\"s2\"\u003e\"reporter\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"mochawesome\"\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"reporterOptions\"\u003c/span\u003e: \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n \u003cspan class=\"s2\"\u003e\"reportDir\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"cypress/report/mochawesome-report\"\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"overwrite\"\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"html\"\u003c/span\u003e: \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"json\"\u003c/span\u003e: \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"timestamp\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"mmddyyyy_HHMMss\"\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"charts\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"false\"\u003c/span\u003e ,\n \u003cspan class=\"s2\"\u003e\"code\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"false\"\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"reporterTitle\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"Automação com cypress\"\u003c/span\u003e\n \u003cspan class=\"o\"\u003e}\u003c/span\u003e,\n \u003cspan class=\"s2\"\u003e\"projectId\"\u003c/span\u003e: \u003cspan class=\"s2\"\u003e\"zb9ibc\"\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cul\u003e\n\u003cli\u003eNão chega a ser um pacote, mas uma funcionalidade do cypress, onde você consegue ter um histórico de testes, relatórios mais detalhados sobre os testes executados. \nUtilizar o comando sempre que for executar os testes informando a key do projeto.\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003enpx cypress run \u003cspan class=\"nt\"\u003e--record\u003c/span\u003e \u003cspan class=\"nt\"\u003e--key\u003c/span\u003e \u003cspan class=\"s1\"\u003e'key'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"criar-comandos\" href=\"#criar-comandos\"\u003e\n  \u003c/a\u003e\n  Criar comandos\n\u003c/h3\u003e\n\n\u003cp\u003eCriar comandos facilita na criação dos testes, além de eliminar código repetido. Deverá ser criado na pasta support e importar no arquivo index.js.\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003eCypress.Commands.add\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'login'\u003c/span\u003e, \u003cspan class=\"o\"\u003e(\u003c/span\u003enome, senha\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n cy.get\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'input[formcontrolname=\"userName\"]'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e.type\u003cspan class=\"o\"\u003e(\u003c/span\u003enome\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n cy.get\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'input[formcontrolname=\"password\"]'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e.type\u003cspan class=\"o\"\u003e(\u003c/span\u003esenha\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n cy.contains\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'button'\u003c/span\u003e, \u003cspan class=\"s1\"\u003e'login'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e.click\u003cspan class=\"o\"\u003e()\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"o\"\u003e})\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"testes-de-api\" href=\"#testes-de-api\"\u003e\n  \u003c/a\u003e\n  Testes de API\n\u003c/h3\u003e\n\n\u003cp\u003eTambém é possível realizar os testes de API, a sintaxe e as valições são bem tranquilas e parecidas as que temos no mercado.\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e it\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'buscar fotos do flavio'\u003c/span\u003e, \u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n cy.request\u003cspan class=\"o\"\u003e({\u003c/span\u003e\n method: \u003cspan class=\"s1\"\u003e'GET'\u003c/span\u003e,\n url: \u003cspan class=\"s1\"\u003e'https://apialurapic.herokuapp.com/flavio/photos'\u003c/span\u003e,\n\n \u003cspan class=\"o\"\u003e})\u003c/span\u003e.then\u003cspan class=\"o\"\u003e((\u003c/span\u003eres\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n expect\u003cspan class=\"o\"\u003e(\u003c/span\u003eres.status\u003cspan class=\"o\"\u003e)\u003c/span\u003e.to.be.equal\u003cspan class=\"o\"\u003e(\u003c/span\u003e200\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n expect\u003cspan class=\"o\"\u003e(\u003c/span\u003eres.body\u003cspan class=\"o\"\u003e)\u003c/span\u003e.is.not.empty\n expect\u003cspan class=\"o\"\u003e(\u003c/span\u003eres.body[0]\u003cspan class=\"o\"\u003e)\u003c/span\u003e.to.have.property\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'description'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n expect\u003cspan class=\"o\"\u003e(\u003c/span\u003eres.body[0].description\u003cspan class=\"o\"\u003e)\u003c/span\u003e.to.be.equal\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Farol iluminado'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n \u003cspan class=\"o\"\u003e})\u003c/span\u003e\n \u003cspan class=\"o\"\u003e})\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"proteger-dados-sens%C3%ADveis\" href=\"#proteger-dados-sens%C3%ADveis\"\u003e\n  \u003c/a\u003e\n  Proteger dados sensíveis\n\u003c/h3\u003e\n\n\u003cp\u003eÉ possível guardar configurações nas próprias variáveis de ambiente do cypress, como o cypress.json, porém, ele é um arquivo que precisamos enviar para o repositório. Vamos utilizar o cypress.env.json, que também é um arquivo de configuração, mas que não precisamos enviar para nosso repositório, deixando-o no gitignore.\u003c/p\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"boas-pr%C3%A1ticas\" href=\"#boas-pr%C3%A1ticas\"\u003e\n  \u003c/a\u003e\n  Boas práticas\n\u003c/h3\u003e\n\n\u003cp\u003eEvitar flaky tests: São testes que ocorrem erros de forma aleatória, não necessariamente são falhas. Exemplo: era esperada que a request fosse realizada em 3 segundos, mas demorou 5, não quer dizer que houve uma falha, mas sim uma demora que pode ou não acontecer.\u003c/p\u003e\n\n\u003cp\u003eDefinir uma baseurl\u003c/p\u003e\n\n\u003cp\u003eUtilizar variáveis de ambiente para dados sensíveis\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003ecy.login\u003cspan class=\"o\"\u003e(\u003c/span\u003eCypress.env\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'userName'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e, Cypress.env\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'password'\u003c/span\u003e\u003cspan class=\"o\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003eUtilizar {log: false} para dados sensíveis\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003etype\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003esenha, \u003cspan class=\"o\"\u003e{\u003c/span\u003elog: \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"o\"\u003e})\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003estub: muito útil para 'mockar' um status esperado.\u003cbr\u003e\n\u003c/p\u003e\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight shell\"\u003e\u003ccode\u003ecy.intercept\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'POST'\u003c/span\u003e, \u003cspan class=\"sb\"\u003e`\u003c/span\u003ehttps://apialurapic.herokuapp.com/user/login\u003cspan class=\"sb\"\u003e`\u003c/span\u003e, \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n statusCode: 400\n \u003cspan class=\"o\"\u003e})\u003c/span\u003e.as\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'stubPost'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\nadicionar \u003cspan class=\"nb\"\u003ewait \u003c/span\u003eno cenário\u003cspan class=\"o\"\u003e(\u003c/span\u003eit\u003cspan class=\"o\"\u003e)\u003c/span\u003e para que o teste aguarde a interceptação\ncy.wait\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'@stubPost'\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003cp\u003emock: muito útil quando queremos saber se o endpoint vai ser chamado corretamente, se os parâmetros esperados estão corretos etc.\u003c/p\u003e\n\n","body_markdown":"# Iniciando em cypress\n\n### Instalação\n\nNode\n* Verificar se o npm está instalado corretamente, podendo verificar a versão instalada: npm -v.\n* Verificar a versão do node: node -v.\n* Instalar as versões pares do Node, as versões LTS. exemplo: 16.13.1.\n* Iniciar o projeto: npm init. Será feita algumas perguntas para criação do package.json.\n* Na configuração do package.json, informar 'npx cypress open' no 'test command'\n* 'npx cypress open' é um executor dos pacotes npm\n\nCypress\n```bash\nnpm i cypress --save-dev \n```\n\n### Como iniciar o Cypress\n\n* Existem duas formas de se executar o cypress, a primeira é utilizando 'npm run test' que vai abrir a ferramenta do cypress, e a segunda é utilizando 'npx cypress run' que vai rodar os testes no terminal.\n\nMesmo seguindo todas as configurações passo a passo, é comum em algumas máquinas ocorrer na primeira execução do Cypress o erro: “Command timed out after 30000 miliseconds”. Para isso, temos duas alternativas:\n\n1) Executar novamente, com o comando npm run test ou npx cypress open;\n\n2) Aumentar esse tempo de verificação no arquivo verify.js que fica no caminho: node_modulescypresslib\tasks\nEsse caminho está dentro da pasta node_modulescypress\tasks e o nome do arquivo é verify.js\nLocalize a constante VERIFY_TEST_RUNNER_TIMEOUT_MS e altere de 30000 para 100000;\nExecutar novamente, com o comando npm run test ou npx cypress open\n\n### Pastas\n\n* fixtures: Utilizada para os arquivos de dados fixos, como mocks que serão utilizados nos testes.\n* integration: Utilizada para os arquivos de testes.\n* plugins: Utilizada para arquivos que eu posso criar/editar para modificar ou estender o comportamento interno no Cypress.\n* support: Utilizada para arquivos de importação e comandos personalizados que podemos criar dentro do Cypress.\n\n### Características positivas do Cypress\n\n* Execução rápida dos testes.\n* Verifica quais navegadores tenho instalado na máquina, facilitando na execução.\n* Possibilidade de acompanhar toda a linha do tempo dos testes, como o estado anterior, o que aconteceu após a ação etc.\n\n\n### Principais comandos\n\n* describe: é uma função que tem 2 parâmetros, o primério é o nome da suite de testes, o segundo é uma função onde eu posso executar qualquer coisa\n* beforeEach: é um comando que é executado antes do inicio de cada cenário de testes.\n* it: é um item de testes ou cenário de teste.\n* .visit: resposável por abrir o link informado.\n* .contains: resposável por identificar elementos pelo texto.\n* .get: resposável por identificar elementos pela classe, tag, id etc.\n* .type: responsável por realizar a ação de escrita.\n* .click: responsável por realizar a ação de click.\n* .should: responsável por realizar as validações.\n* .only: faz com que seja executado somente o cenário que tenha esse comando.\n* .on: usado para eventos, como por exemplo windows.alert.\n* .request: responsável por estruturar e validar as requests.\n* .expect: responsável por realizar as validações.\n\n\n### Três As\n\nO teste geralmente é composto por três As, que é o arrange, o act e o assert\n\n* O arrange é a preparação do ambiente\n* O act é a ação que eu quero fazer\n* O assert é o que eu quero verificar\n\n### Pacotes úteis\nmochawesome é um gerador de relatório personalizado. Com ele podemos fazer configurações, verificar se o log será gerado em html, json, onde será gerado, qual o formato de data para ser utilizado no nome, o título, dentre outros parâmetros\n\n```bash\nnpm i -D mochawesome\n```\nApós a instalação. deverá configurar o arquivo cypress.json\n```bash\n{\n \"reporter\": \"mochawesome\",\n \"reporterOptions\": {\n \"reportDir\": \"cypress/report/mochawesome-report\",\n \"overwrite\": true,\n \"html\": true,\n \"json\": false,\n \"timestamp\": \"mmddyyyy_HHMMss\",\n \"charts\": \"false\" ,\n \"code\": \"false\",\n \"reporterTitle\": \"Automação com cypress\"\n },\n \"projectId\": \"zb9ibc\"\n}\n\n```\n\n* Não chega a ser um pacote, mas uma funcionalidade do cypress, onde você consegue ter um histórico de testes, relatórios mais detalhados sobre os testes executados. \nUtilizar o comando sempre que for executar os testes informando a key do projeto.\n```bash\nnpx cypress run --record --key 'key'\n```\n\n### Criar comandos\nCriar comandos facilita na criação dos testes, além de eliminar código repetido. Deverá ser criado na pasta support e importar no arquivo index.js.\n\n```bash\nCypress.Commands.add('login', (nome, senha) =\u003e {\n cy.get('input[formcontrolname=\"userName\"]').type(nome);\n cy.get('input[formcontrolname=\"password\"]').type(senha);\n cy.contains('button', 'login').click();\n})\n```\n\n### Testes de API\n\nTambém é possível realizar os testes de API, a sintaxe e as valições são bem tranquilas e parecidas as que temos no mercado.\n\n```bash\n it('buscar fotos do flavio', () =\u003e {\n cy.request({\n method: 'GET',\n url: 'https://apialurapic.herokuapp.com/flavio/photos',\n\n }).then((res) =\u003e {\n expect(res.status).to.be.equal(200)\n expect(res.body).is.not.empty\n expect(res.body[0]).to.have.property('description')\n expect(res.body[0].description).to.be.equal('Farol iluminado')\n })\n })\n```\n\n### Proteger dados sensíveis \n\nÉ possível guardar configurações nas próprias variáveis de ambiente do cypress, como o cypress.json, porém, ele é um arquivo que precisamos enviar para o repositório. Vamos utilizar o cypress.env.json, que também é um arquivo de configuração, mas que não precisamos enviar para nosso repositório, deixando-o no gitignore.\n\n\n### Boas práticas\nEvitar flaky tests: São testes que ocorrem erros de forma aleatória, não necessariamente são falhas. Exemplo: era esperada que a request fosse realizada em 3 segundos, mas demorou 5, não quer dizer que houve uma falha, mas sim uma demora que pode ou não acontecer.\n\nDefinir uma baseurl\n\nUtilizar variáveis de ambiente para dados sensíveis\n```bash\ncy.login(Cypress.env('userName'), Cypress.env('password'))\n```\n\nUtilizar {log: false} para dados sensíveis\n```bash\ntype(senha, {log: false});\n```\nstub: muito útil para 'mockar' um status esperado.\n```bash\ncy.intercept('POST', `https://apialurapic.herokuapp.com/user/login`, {\n statusCode: 400\n }).as('stubPost')\nadicionar wait no cenário(it) para que o teste aguarde a interceptação\ncy.wait('@stubPost')\n```\n\nmock: muito útil quando queremos saber se o endpoint vai ser chamado corretamente, se os parâmetros esperados estão corretos etc.","user":{"name":"Diego Souza","username":"carecone","twitter_username":"_Carecone","github_username":"Carecone","user_id":976157,"website_url":null,"profile_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--D6nnhQFT--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/976157/4e65a464-a008-4b2b-bc2f-55d2fb6157e6.png","profile_image_90":"https://res.cloudinary.com/practicaldev/image/fetch/s--p6f0etvW--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/976157/4e65a464-a008-4b2b-bc2f-55d2fb6157e6.png"}}