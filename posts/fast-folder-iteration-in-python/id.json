{"type_of":"article","id":962279,"title":"Fast folder iteration in python","description":"Fast folder iteration in python   Post created at 2022-01-19 07:53  I have a problem to deal...","readable_publish_date":"Jan 21","slug":"fast-folder-iteration-in-python-3g1f","path":"/guionardo/fast-folder-iteration-in-python-3g1f","url":"https://dev.to/guionardo/fast-folder-iteration-in-python-3g1f","comments_count":0,"public_reactions_count":0,"collection_id":null,"published_timestamp":"2022-01-21T00:26:12Z","positive_reactions_count":0,"cover_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--OzqBLeJU--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://raw.githubusercontent.com/guionardo/dev-to-blog/main/posts/fast-folder-iteration-in-python/800px-CICR-ICRC-Archives-HQ-WWII-files-microfilms_RomanDeckert09062020.jpg","social_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--8-IPyAOC--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://raw.githubusercontent.com/guionardo/dev-to-blog/main/posts/fast-folder-iteration-in-python/800px-CICR-ICRC-Archives-HQ-WWII-files-microfilms_RomanDeckert09062020.jpg","canonical_url":"https://dev.to/guionardo/fast-folder-iteration-in-python-3g1f","created_at":"2022-01-21T00:26:12Z","edited_at":null,"crossposted_at":null,"published_at":"2022-01-21T00:26:12Z","last_comment_at":"2022-01-21T00:26:12Z","reading_time_minutes":3,"tag_list":"python","tags":["python"],"body_html":"\u003ch1\u003e\n  \u003ca name=\"fast-folder-iteration-in-python\" href=\"#fast-folder-iteration-in-python\"\u003e\n  \u003c/a\u003e\n  Fast folder iteration in python\n\u003c/h1\u003e\n\n\u003cp\u003ePost created at 2022-01-19 07:53\u003c/p\u003e\n\n\u003cp\u003eI have a problem to deal here.\u003c/p\u003e\n\n\u003cp\u003eI need to iterate over a big tree of folders and files and run process over each file.\u003c/p\u003e\n\n\u003cp\u003eIn python, we have some options to deal to folders and files.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eglob\u003c/li\u003e\n\u003cli\u003eiglob\u003c/li\u003e\n\u003cli\u003eos.walk\u003c/li\u003e\n\u003cli\u003eos.scandir\u003c/li\u003e\n\u003cli\u003epathlib.Path\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eRunning this benchmark, we can read some implementation details:\u003c/p\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"glob\" href=\"#glob\"\u003e\n  \u003c/a\u003e\n  \u003ca href=\"https://docs.python.org/3/library/glob.html#glob.glob\"\u003eglob\u003c/a\u003e\n\u003c/h2\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eglob\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e'some_folder/another_folder/**/*'\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nb\"\u003efile\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eglob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eglob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erecursive\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003esome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"pros\" href=\"#pros\"\u003e\n  \u003c/a\u003e\n  Pros\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eEasy to use, less code to write\u003c/li\u003e\n\u003cli\u003eEasy to apply filters using masks (fnmatch based)\u003c/li\u003e\n\u003cli\u003eReturns data as a list\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"cons\" href=\"#cons\"\u003e\n  \u003c/a\u003e\n  Cons\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eTime to scan is the worst (more than 11x the quickest method)\u003c/li\u003e\n\u003cli\u003eData will be available only after all files/folders been scanned\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"iglob\" href=\"#iglob\"\u003e\n  \u003c/a\u003e\n  \u003ca href=\"https://docs.python.org/3/library/glob.html#glob.iglob\"\u003eiglob\u003c/a\u003e\n\u003c/h2\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eglob\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e'some_folder/another_folder/**/*'\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nb\"\u003efile\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eglob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eiglob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erecursive\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003esome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"pros\" href=\"#pros\"\u003e\n  \u003c/a\u003e\n  Pros\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eEasy to use, like glob\u003c/li\u003e\n\u003cli\u003eSame filtering\u003c/li\u003e\n\u003cli\u003eReturns data as iterator, so you can have your data without need to wait all iteration ending.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"cons\" href=\"#cons\"\u003e\n  \u003c/a\u003e\n  Cons\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eTime to scan is a little better than glob (10x the quickest method)\u003c/li\u003e\n\u003cli\u003eTime to first file could be mutch better\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"oswalk\" href=\"#oswalk\"\u003e\n  \u003c/a\u003e\n  \u003ca href=\"https://docs.python.org/3/library/os.html#os.walk\"\u003eos.walk\u003c/a\u003e\n\u003c/h2\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e'some_folder/another_folder/**/*'\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efiles\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewalk\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nb\"\u003efile\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"pros\" href=\"#pros\"\u003e\n  \u003c/a\u003e\n  Pros\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eGood performance. Second quickest method (less than 2x slower than the quickest)\u003c/li\u003e\n\u003cli\u003eTime for the first file almost imediattely (better result of all)\u003c/li\u003e\n\u003cli\u003eExplicit code in loops gives more visibility and control if you need validations or another nasty processes\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"cons\" href=\"#cons\"\u003e\n  \u003c/a\u003e\n  Cons\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eMore code needed, with nested loops. \u003c/li\u003e\n\u003cli\u003eIf you need to nest os.walk in another os.walk loop, some strange things can ocurr. But probably your code needs some refactoring.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"osscandir\" href=\"#osscandir\"\u003e\n  \u003c/a\u003e\n  \u003ca href=\"https://docs.python.org/3/library/os.html#os.walk\"\u003eos.scandir\u003c/a\u003e\n\u003c/h2\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003etyping\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eGenerator\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e'some_folder/another_folder/**/*'\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_files\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eGenerator\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003escandir\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003escan\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003escan\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_file\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\n \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003esubitem\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eget_files\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"n\"\u003esubitem\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"pros\" href=\"#pros\"\u003e\n  \u003c/a\u003e\n  Pros\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eBest performance of all\u003c/li\u003e\n\u003cli\u003eContext based, assure resources are released after processing\u003c/li\u003e\n\u003cli\u003eLess verbose than os.walk\u003c/li\u003e\n\u003cli\u003eEasy to implement your custom business rules\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"cons\" href=\"#cons\"\u003e\n  \u003c/a\u003e\n  Cons\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eA little more complex. No big deal.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"pathlibpathrglob\" href=\"#pathlibpathrglob\"\u003e\n  \u003c/a\u003e\n  \u003ca href=\"https://docs.python.org/3/library/pathlib.html\"\u003epathlib.Path.rglob\u003c/a\u003e\n\u003c/h2\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight python\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003epathlib\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e'some_folder/another_folder'\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003epathlib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efolder\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003erglob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'*'\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_file\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch3\u003e\n  \u003ca name=\"pros\" href=\"#pros\"\u003e\n  \u003c/a\u003e\n  Pros\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eEasy to implement your custom business rules\u003c/li\u003e\n\u003cli\u003eReturns a iterator\u003c/li\u003e\n\u003cli\u003eYou can have your files soon and don't need to wait for all scan (7x more time than os.scandir)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n  \u003ca name=\"cons\" href=\"#cons\"\u003e\n  \u003c/a\u003e\n  Cons\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eAverage time to scan (almost 8 times greater than os.scandir)\u003c/li\u003e\n\u003cli\u003eMemory consumption is 4 times more than the other methods\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"some-data-from-tests\" href=\"#some-data-from-tests\"\u003e\n  \u003c/a\u003e\n  Some data from tests\n\u003c/h2\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"system-information\" href=\"#system-information\"\u003e\n  \u003c/a\u003e\n  System Information\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eSystem\u003c/th\u003e\n\u003cth\u003eRelease\u003c/th\u003e\n\u003cth\u003eVersion\u003c/th\u003e\n\u003cth\u003eMachine\u003c/th\u003e\n\u003cth\u003eProcessor\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eLinux\u003c/td\u003e\n\u003ctd\u003e5.11.0-46-generic\u003c/td\u003e\n\u003ctd\u003e#51~20.04.1-Ubuntu SMP Fri Jan 7 06:51:40 UTC 2022\u003c/td\u003e\n\u003ctd\u003ex86_64\u003c/td\u003e\n\u003ctd\u003ex86_64\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"cpu-info\" href=\"#cpu-info\"\u003e\n  \u003c/a\u003e\n  CPU Info\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003ePhysical cores\u003c/th\u003e\n\u003cth\u003eTotal cores\u003c/th\u003e\n\u003cth\u003eMax frequency\u003c/th\u003e\n\u003cth\u003eMin frequency\u003c/th\u003e\n\u003cth\u003eCurrent frequency\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003e3400\u003c/td\u003e\n\u003ctd\u003e400\u003c/td\u003e\n\u003ctd\u003e1.892\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"cpu-usage-per-core\" href=\"#cpu-usage-per-core\"\u003e\n  \u003c/a\u003e\n  CPU Usage Per Core\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003cth\u003e6\u003c/th\u003e\n\u003cth\u003e7\u003c/th\u003e\n\u003cth\u003eTotal\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e15.6\u003c/td\u003e\n\u003ctd\u003e16.5\u003c/td\u003e\n\u003ctd\u003e10.4\u003c/td\u003e\n\u003ctd\u003e14.1\u003c/td\u003e\n\u003ctd\u003e15.2\u003c/td\u003e\n\u003ctd\u003e14.4\u003c/td\u003e\n\u003ctd\u003e15.2\u003c/td\u003e\n\u003ctd\u003e12.4\u003c/td\u003e\n\u003ctd\u003e14\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"memory-information\" href=\"#memory-information\"\u003e\n  \u003c/a\u003e\n  Memory Information\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eTotal\u003c/th\u003e\n\u003cth\u003eAvailable\u003c/th\u003e\n\u003cth\u003eUsed\u003c/th\u003e\n\u003cth\u003ePercentage\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e15.51GB\u003c/td\u003e\n\u003ctd\u003e4.77GB\u003c/td\u003e\n\u003ctd\u003e9.56GB\u003c/td\u003e\n\u003ctd\u003e69.2%\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"swap\" href=\"#swap\"\u003e\n  \u003c/a\u003e\n  SWAP\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eTotal\u003c/th\u003e\n\u003cth\u003eFree\u003c/th\u003e\n\u003cth\u003eUsed\u003c/th\u003e\n\u003cth\u003ePercentage\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e15.26GB\u003c/td\u003e\n\u003ctd\u003e3.28GB\u003c/td\u003e\n\u003ctd\u003e11.98GB\u003c/td\u003e\n\u003ctd\u003e78.5%\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\n\n\u003cdiv class=\"highlight js-code-highlight\"\u003e\n\u003cpre class=\"highlight plaintext\"\u003e\u003ccode\u003e Creating sample files\n + Creating folder ./test_files\n + Creating files LEVELS=6 FOLDER_COUNT=6 FILE_COUNT_BY_FOLDER=20\n + Created 933120 files in 0:02:08.928680\n\n* Running iterators: GlobFolderIterator IGlobFolderIterator OSWalkFolderIterator ScanDirIterator PathLibFolderIterator\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"highlight__panel js-actions-panel\"\u003e\n\u003cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003e\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003e\u003ctitle\u003eEnter fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n    \u003csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003e\u003ctitle\u003eExit fullscreen mode\u003c/title\u003e\n    \u003cpath d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\u003e\u003c/path\u003e\n\u003c/svg\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\n\n\n\u003ch2\u003e\n  \u003ca name=\"memory-usage\" href=\"#memory-usage\"\u003e\n  \u003c/a\u003e\n  MEMORY USAGE\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eIterator\u003c/th\u003e\n\u003cth\u003eRSS\u003c/th\u003e\n\u003cth\u003eVMS\u003c/th\u003e\n\u003cth\u003eDATA\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eIGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e111280128\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eOSWalkFolderIterator\u003c/td\u003e\n\u003ctd\u003e111280128\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eScanDirIterator\u003c/td\u003e\n\u003ctd\u003e111280128\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003ctd\u003e96468992\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e117309440\u003c/td\u003e\n\u003ctd\u003e102498304\u003c/td\u003e\n\u003ctd\u003e120254464\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePathLibFolderIterator\u003c/td\u003e\n\u003ctd\u003e469721088\u003c/td\u003e\n\u003ctd\u003e455081984\u003c/td\u003e\n\u003ctd\u003e455081984\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"elapsed-time\" href=\"#elapsed-time\"\u003e\n  \u003c/a\u003e\n  ELAPSED TIME\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eIterator\u003c/th\u003e\n\u003cth\u003eElapsed time\u003c/th\u003e\n\u003cth\u003eX\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eScanDirIterator\u003c/td\u003e\n\u003ctd\u003e0:00:01.317526\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eOSWalkFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:02.496639\u003c/td\u003e\n\u003ctd\u003e1.9\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePathLibFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:10.464794\u003c/td\u003e\n\u003ctd\u003e7.9\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eIGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:14.358165\u003c/td\u003e\n\u003ctd\u003e10.9\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:15.308936\u003c/td\u003e\n\u003ctd\u003e11.6\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n  \u003ca name=\"time-for-first-file\" href=\"#time-for-first-file\"\u003e\n  \u003c/a\u003e\n  TIME FOR FIRST FILE\n\u003c/h2\u003e\n\n\u003cdiv class=\"table-wrapper-paragraph\"\u003e\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eIterator\u003c/th\u003e\n\u003cth\u003eElapsed time\u003c/th\u003e\n\u003cth\u003eX\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eScanDirIterator\u003c/td\u003e\n\u003ctd\u003e0:00:00.000098\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eOSWalkFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:00.000247\u003c/td\u003e\n\u003ctd\u003e2.5\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePathLibFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:00.000690\u003c/td\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eIGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:00.001135\u003c/td\u003e\n\u003ctd\u003e11.6\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eGlobFolderIterator\u003c/td\u003e\n\u003ctd\u003e0:00:07.831005\u003c/td\u003e\n\u003ctd\u003e79908.2\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\u003c/div\u003e\n\n\u003cp\u003eYou can check the source code for this \u003ca href=\"https://github.com/guionardo/python-folder-iteration\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\n\u003cp\u003eImage from this wikipedia \u003ca href=\"https://en.wikipedia.org/wiki/International_Committee_of_the_Red_Cross_archives\"\u003earticle\u003c/a\u003e.\u003c/p\u003e\n\n","body_markdown":"# Fast folder iteration in python\n\nPost created at 2022-01-19 07:53\n\nI have a problem to deal here.\n\nI need to iterate over a big tree of folders and files and run process over each file.\n\nIn python, we have some options to deal to folders and files.\n\n* glob\n* iglob\n* os.walk\n* os.scandir\n* pathlib.Path\n\nRunning this benchmark, we can read some implementation details:\n\n## [glob](https://docs.python.org/3/library/glob.html#glob.glob)\n\n``` python\nimport glob\n\nfolder='some_folder/another_folder/**/*'\nfor file in glob.glob(folder, recursive=True):\n print(file)\n```\n\n```\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file2\n```\n\n### Pros\n\n* Easy to use, less code to write\n* Easy to apply filters using masks (fnmatch based)\n* Returns data as a list\n\n### Cons\n\n* Time to scan is the worst (more than 11x the quickest method)\n* Data will be available only after all files/folders been scanned\n\n## [iglob](https://docs.python.org/3/library/glob.html#glob.iglob)\n\n``` python\nimport glob\n\nfolder='some_folder/another_folder/**/*'\nfor file in glob.iglob(folder, recursive=True):\n print(file)\n```\n\n```\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file1\nsome_folder/another_folder/f1/file2\n```\n\n### Pros\n\n* Easy to use, like glob\n* Same filtering\n* Returns data as iterator, so you can have your data without need to wait all iteration ending.\n\n### Cons\n\n* Time to scan is a little better than glob (10x the quickest method)\n* Time to first file could be mutch better\n\n## [os.walk](https://docs.python.org/3/library/os.html#os.walk)\n\n```python\nimport os\n\nfolder='some_folder/another_folder/**/*'\n\nfor root, _, files in os.walk(folder):\n for file in files:\n print(os.path.join(root, file))\n```\n\n### Pros\n\n* Good performance. Second quickest method (less than 2x slower than the quickest)\n* Time for the first file almost imediattely (better result of all)\n* Explicit code in loops gives more visibility and control if you need validations or another nasty processes\n \n### Cons \n\n* More code needed, with nested loops. \n* If you need to nest os.walk in another os.walk loop, some strange things can ocurr. But probably your code needs some refactoring.\n\n## [os.scandir](https://docs.python.org/3/library/os.html#os.walk)\n\n```python\nimport os\nfrom typing import Generator\n\nfolder='some_folder/another_folder/**/*'\n\ndef get_files(folder: str) -\u003e Generator:\n with os.scandir(folder) as scan:\n for item in scan:\n if item.is_file():\n yield item.path\n else:\n for subitem in get_files(item.path):\n yield subitem\n```\n\n### Pros\n\n* Best performance of all\n* Context based, assure resources are released after processing\n* Less verbose than os.walk\n* Easy to implement your custom business rules\n\n\n### Cons\n\n* A little more complex. No big deal.\n\n\n## [pathlib.Path.rglob](https://docs.python.org/3/library/pathlib.html)\n\n```python\nimport pathlib\n\nfolder='some_folder/another_folder'\n\nfor path in pathlib.Path(folder).rglob('*'):\n if path.is_file():\n yield str(path)\n```\n\n### Pros\n\n* Easy to implement your custom business rules\n* Returns a iterator\n* You can have your files soon and don't need to wait for all scan (7x more time than os.scandir)\n\n### Cons\n\n* Average time to scan (almost 8 times greater than os.scandir)\n* Memory consumption is 4 times more than the other methods\n \n## Some data from tests\n\n## System Information\n\n| System | Release | Version | Machine | Processor |\n| ------ | ----------------- | -------------------------------------------------- | ------- | --------- |\n| Linux | 5.11.0-46-generic | #51~20.04.1-Ubuntu SMP Fri Jan 7 06:51:40 UTC 2022 | x86_64 | x86_64 |\n\n## CPU Info\n\n| Physical cores | Total cores | Max frequency | Min frequency | Current frequency |\n| -------------- | ----------- | ------------- | ------------- | ----------------- |\n| 4 | 8 | 3400 | 400 | 1.892 |\n\n## CPU Usage Per Core\n\n| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | Total |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ----- |\n| 15.6 | 16.5 | 10.4 | 14.1 | 15.2 | 14.4 | 15.2 | 12.4 | 14 |\n\n## Memory Information\n\n| Total | Available | Used | Percentage |\n| ------- | --------- | ------ | ---------- |\n| 15.51GB | 4.77GB | 9.56GB | 69.2% |\n\n## SWAP\n\n| Total | Free | Used | Percentage |\n| ------- | ------ | ------- | ---------- |\n| 15.26GB | 3.28GB | 11.98GB | 78.5% |\n\n```\n Creating sample files\n + Creating folder ./test_files\n + Creating files LEVELS=6 FOLDER_COUNT=6 FILE_COUNT_BY_FOLDER=20\n + Created 933120 files in 0:02:08.928680\n\n* Running iterators: GlobFolderIterator IGlobFolderIterator OSWalkFolderIterator ScanDirIterator PathLibFolderIterator\n```\n\n## MEMORY USAGE\n\n| Iterator | RSS | VMS | DATA |\n| --------------------- | --------- | --------- | --------- |\n| IGlobFolderIterator | 111280128 | 96468992 | 96468992 |\n| OSWalkFolderIterator | 111280128 | 96468992 | 96468992 |\n| ScanDirIterator | 111280128 | 96468992 | 96468992 |\n| GlobFolderIterator | 117309440 | 102498304 | 120254464 |\n| PathLibFolderIterator | 469721088 | 455081984 | 455081984 |\n\n## ELAPSED TIME\n\n| Iterator | Elapsed time | X |\n| --------------------- | -------------- | ---- |\n| ScanDirIterator | 0:00:01.317526 | 1 |\n| OSWalkFolderIterator | 0:00:02.496639 | 1.9 |\n| PathLibFolderIterator | 0:00:10.464794 | 7.9 |\n| IGlobFolderIterator | 0:00:14.358165 | 10.9 |\n| GlobFolderIterator | 0:00:15.308936 | 11.6 |\n\n## TIME FOR FIRST FILE\n\n| Iterator | Elapsed time | X |\n| --------------------- | -------------- | ------- |\n| ScanDirIterator | 0:00:00.000098 | 1 |\n| OSWalkFolderIterator | 0:00:00.000247 | 2.5 |\n| PathLibFolderIterator | 0:00:00.000690 | 7 |\n| IGlobFolderIterator | 0:00:00.001135 | 11.6 |\n| GlobFolderIterator | 0:00:07.831005 | 79908.2 |\n\nYou can check the source code for this [here](https://github.com/guionardo/python-folder-iteration).\n\n\nImage from this wikipedia [article](https://en.wikipedia.org/wiki/International_Committee_of_the_Red_Cross_archives).","user":{"name":"Guionardo Furlan","username":"guionardo","twitter_username":"guionardo","github_username":"guionardo","website_url":null,"profile_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--u_v01jzV--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/37248/6ed4b320-f9ac-401f-aec4-af926ffe30c0.png","profile_image_90":"https://res.cloudinary.com/practicaldev/image/fetch/s---lfp02sq--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/37248/6ed4b320-f9ac-401f-aec4-af926ffe30c0.png"}}